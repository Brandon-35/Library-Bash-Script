#!/bin/bash

LOG_FILE="$HOME/git_commit_log.txt"

# L岷y th么ng tin commit
TIMESTAMP=$(date "+%Y-%m-%d %H:%M:%S")
USER_NAME=$(git config user.name)
BRANCH_NAME=$(git rev-parse --abbrev-ref HEAD)
LAST_COMMIT_HASH=$(git rev-parse --short HEAD)
LAST_COMMIT_MSG=$(git log -1 --pretty=%B)
CHANGED_FILES=$(git diff-tree --no-commit-id --name-only -r HEAD)

# Ki峄m tra n岷u kh么ng c贸 file no thay 峄i
if [ -z "$CHANGED_FILES" ]; then
    echo "锔 Kh么ng c贸 file no thay 峄i, kh么ng ghi log."
    exit 0
fi

# Ghi log vo file
echo " [$TIMESTAMP] User: $USER_NAME | Branch: $BRANCH_NAME | Commit: $LAST_COMMIT_HASH" >> "$LOG_FILE"
echo " Message: $LAST_COMMIT_MSG" >> "$LOG_FILE"
echo " Files Changed:" >> "$LOG_FILE"
echo "$CHANGED_FILES" >> "$LOG_FILE"
echo "-----------------------------------" >> "$LOG_FILE"
